<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>commerce-sdk-isomorphic</title>
	<meta name="description" content="Documentation for commerce-sdk-isomorphic">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">commerce-sdk-isomorphic</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>commerce-sdk-isomorphic</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#commerce-sdk-isomorphic" id="commerce-sdk-isomorphic" style="color: inherit; text-decoration: none;">
					<h1>commerce-sdk-isomorphic</h1>
				</a>
				<p>This SDK provides a Browser &amp; Node.js JavaScript client for calling <a href="https://developer.salesforce.com/docs/commerce/commerce-api/overview">B2C Commerce Shopper APIs</a>.</p>
				<p><em>For a Node.js only SDK that can also access Admin APIs checkout <a href="https://github.com/SalesforceCommerceCloud/commerce-sdk">Commerce SDK</a>.</em></p>
				<a href="#warning-planned-api-changes-warning" id="warning-planned-api-changes-warning" style="color: inherit; text-decoration: none;">
					<h2>:warning: Planned API Changes :warning:</h2>
				</a>
				<a href="#shopper-context" id="shopper-context" style="color: inherit; text-decoration: none;">
					<h3>Shopper Context</h3>
				</a>
				<p>Starting July 31st 2024, all endpoints in the Shopper context API will require the <code>siteId</code> parameter for new customers. This field is marked as optional for backward compatibility and will be changed to mandatory tentatively by January 2025. You can read more about the planned change <a href="https://developer.salesforce.com/docs/commerce/commerce-api/references/shopper-context?meta=Summary">here</a> in the notes section.</p>
				<a href="#shopper-login-slas" id="shopper-login-slas" style="color: inherit; text-decoration: none;">
					<h3>Shopper Login (SLAS)</h3>
				</a>
				<p>SLAS will soon require new tenants to pass <code>channel_id</code> as an argument for retrieving guest access tokens. You can read more about the planned change <a href="https://developer.salesforce.com/docs/commerce/commerce-api/guide/slas.html#guest-tokens">here</a>.</p>
				<p>Please be aware that existing tenants are on a temporary allow list and will see no immediate disruption to service.  We do ask that all users seek to adhere to the <code>channel_id</code> requirement before the end of August to enhance your security posture before the holiday peak season.</p>
				<p>In practice, we recommend:</p>
				<ul>
					<li>For customers using the SLAS helpers with a public client, it is recommended to upgrade to at least <code>v1.8.0</code> of the <code>commerce-sdk-isomorphic</code>.</li>
					<li>For customers using the SLAS helpers with a private client, it is recommended to upgrade to <code>v3.0.0</code> of the <code>commerce-sdk-isomorphic</code>.</li>
				</ul>
				<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
					<h2>Getting Started</h2>
				</a>
				<a href="#requirements" id="requirements" style="color: inherit; text-decoration: none;">
					<h3>Requirements</h3>
				</a>
				<ul>
					<li>Node <code>^12.x</code>, <code>^14.x</code>, <code>^16.x</code>, <code>^18.x</code></li>
					<li>The SDK requires B2C Commerce API (SCAPI) to be configured. For more info see <a href="https://developer.salesforce.com/docs/commerce/commerce-api/guide/get-started.html">Getting started with SCAPI</a>.</li>
				</ul>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h3>Installation</h3>
				</a>
				<pre><code class="language-bash">npm install commerce-sdk-isomorphic</code></pre>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h3>Usage</h3>
				</a>
				<pre><code class="language-javascript"><span class="hljs-keyword">import</span> {helpers, ShopperLogin, ShopperSearch} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;commerce-sdk-isomorphic&#x27;</span>;

<span class="hljs-keyword">const</span> config = {
  <span class="hljs-comment">// SCAPI does not support CORS, so client side requests must use a reverse proxy.</span>
  <span class="hljs-attr">proxy</span>: <span class="hljs-string">&#x27;https://localhost:3000&#x27;</span>,
  <span class="hljs-attr">parameters</span>: {
    <span class="hljs-attr">clientId</span>: <span class="hljs-string">&#x27;&lt;your-client-id&gt;&#x27;</span>,
    <span class="hljs-attr">organizationId</span>: <span class="hljs-string">&#x27;&lt;your-org-id&gt;&#x27;</span>,
    <span class="hljs-attr">shortCode</span>: <span class="hljs-string">&#x27;&lt;your-short-code&gt;&#x27;</span>,
    <span class="hljs-attr">siteId</span>: <span class="hljs-string">&#x27;&lt;your-site-id&gt;&#x27;</span>,
  },
};

<span class="hljs-keyword">const</span> {access_token} = <span class="hljs-keyword">await</span> helpers.loginGuestUser(
  <span class="hljs-keyword">new</span> ShopperLogin(config),
  {<span class="hljs-attr">redirectURI</span>: <span class="hljs-string">`<span class="hljs-subst">${config.proxy}</span>/callback`</span>}
);

<span class="hljs-keyword">const</span> shopperSearch = <span class="hljs-keyword">new</span> ShopperSearch({
  ...config,
  <span class="hljs-attr">headers</span>: {<span class="hljs-attr">authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${access_token}</span>`</span>},
});

<span class="hljs-keyword">const</span> searchResult = <span class="hljs-keyword">await</span> shopperSearch.productSearch({
  <span class="hljs-attr">parameters</span>: {<span class="hljs-attr">q</span>: <span class="hljs-string">&#x27;shirt&#x27;</span>},
});</code></pre>
				<a href="#fetch-options" id="fetch-options" style="color: inherit; text-decoration: none;">
					<h4>Fetch Options</h4>
				</a>
				<p>You can configure how the SDK makes requests using the <code>fetchOptions</code> parameter. It is passed to <a href="https://github.com/node-fetch/node-fetch/1#api">node-fetch</a> on the server and <a href="https://github.github.io/fetch/">whatwg-fetch</a> on browser.</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> https = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;https&quot;</span>);

<span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">fetchOptions</span>: {
    <span class="hljs-comment">// By default, requests made using the SDK do not include cookies.</span>
    <span class="hljs-attr">credentials</span>: <span class="hljs-string">&quot;include&quot;</span>,
    <span class="hljs-attr">timeout</span>: <span class="hljs-number">2000</span>,
    <span class="hljs-attr">agent</span>: <span class="hljs-keyword">new</span> https.agent({ <span class="hljs-attr">keepAlive</span>: <span class="hljs-literal">true</span> }),
  },
};</code></pre>
				<p>For more info, refer to the <a href="https://salesforcecommercecloud.github.io/commerce-sdk-isomorphic/">documentation site</a>.</p>
				<a href="#additional-config-settings" id="additional-config-settings" style="color: inherit; text-decoration: none;">
					<h4>Additional Config Settings</h4>
				</a>
				<ul>
					<li><code>headers</code>: Headers to include with API requests.</li>
					<li><code>throwOnBadResponse</code>: When <code>true</code>, the SDK throws an <code>Error</code> on responses whose status is not 2xx or 304.</li>
				</ul>
				<a href="#custom-query-parameters" id="custom-query-parameters" style="color: inherit; text-decoration: none;">
					<h3>Custom Query Parameters</h3>
				</a>
				<p>You can pass custom query parameters through the SDK to be used in <a href="https://developer.salesforce.com/docs/commerce/commerce-api/guide/extensibility_via_hooks.html">B2C Commerce API Hooks</a>. Custom query parameters must begin with <code>c_</code>:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> searchResult = <span class="hljs-keyword">await</span> shopperSearch.productSearch({
  <span class="hljs-attr">parameters</span>: {
    <span class="hljs-attr">q</span>: <span class="hljs-string">&#x27;shirt&#x27;</span>,
    <span class="hljs-attr">c_paramkey</span>: <span class="hljs-string">&#x27;&lt;param-value&gt;&#x27;</span>
  },
});</code></pre>
				<p>Invalid query parameters that are not a part of the API and do not follow the <code>c_</code> custom query parameter convention are filtered from the request with a warning.</p>
				<a href="#custom-apis" id="custom-apis" style="color: inherit; text-decoration: none;">
					<h3>Custom APIs</h3>
				</a>
				<p>The SDK supports calling <a href="https://developer.salesforce.com/docs/commerce/commerce-api/guide/custom-apis.html">B2C Commerce Custom APIs</a> with a helper function, <code>callCustomEndpoint</code>:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">import</span> pkg <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;commerce-sdk-isomorphic&quot;</span>;
<span class="hljs-keyword">const</span> { helpers } = pkg;

<span class="hljs-keyword">const</span> clientConfig = {
  <span class="hljs-attr">parameters</span>: {
    <span class="hljs-attr">clientId</span>: <span class="hljs-string">&quot;&lt;your-client-id&gt;&quot;</span>,
    <span class="hljs-attr">organizationId</span>: <span class="hljs-string">&quot;&lt;your-org-id&gt;&quot;</span>,
    <span class="hljs-attr">shortCode</span>: <span class="hljs-string">&quot;&lt;your-short-code&gt;&quot;</span>,
    <span class="hljs-attr">siteId</span>: <span class="hljs-string">&quot;&lt;your-site-id&gt;&quot;</span>,
  },
  <span class="hljs-comment">// If not provided, it&#x27;ll use the default production URI:</span>
  <span class="hljs-comment">// &#x27;https://{shortCode}.api.commercecloud.salesforce.com/custom/{apiName}/{apiVersion}&#x27;</span>
  <span class="hljs-comment">// path parameters should be wrapped in curly braces like the default production URI</span>
  <span class="hljs-attr">baseUri</span>: <span class="hljs-string">&quot;&lt;your-base-uri&gt;&quot;</span>,
};

<span class="hljs-comment">// Required params: apiName, endpointPath, shortCode, organizaitonId</span>
<span class="hljs-comment">// Required path params can be passed into:</span>
<span class="hljs-comment">// options.customApiPathParameters or clientConfig.parameters</span>
<span class="hljs-keyword">const</span> customApiPathParameters = {
  <span class="hljs-attr">apiName</span>: <span class="hljs-string">&quot;loyalty-info&quot;</span>,
  <span class="hljs-attr">apiVersion</span>: <span class="hljs-string">&quot;v1&quot;</span>, <span class="hljs-comment">// defaults to v1 if not provided</span>
  <span class="hljs-attr">endpointPath</span>: <span class="hljs-string">&quot;customers&quot;</span>,
};

<span class="hljs-keyword">const</span> accessToken = <span class="hljs-string">&quot;&lt;INSERT ACCESS TOKEN HERE&gt;&quot;</span>;

<span class="hljs-keyword">await</span> helpers.callCustomEndpoint({
  <span class="hljs-attr">options</span>: {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;GET&quot;</span>,
    <span class="hljs-attr">parameters</span>: {
      <span class="hljs-attr">queryParameter</span>: <span class="hljs-string">&quot;queryParameter1&quot;</span>,
    },
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-comment">// Content-Type is defaulted to application/json if not provided</span>
      <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>,
      <span class="hljs-attr">authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${accessToken}</span>`</span>,
    },
    customApiPathParameters,
  },
  clientConfig,
});

<span class="hljs-keyword">await</span> helpers.callCustomEndpoint({
  <span class="hljs-attr">options</span>: {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;POST&quot;</span>,
    <span class="hljs-attr">parameters</span>: {
      <span class="hljs-attr">queryParameter</span>: <span class="hljs-string">&quot;queryParameter1&quot;</span>,
    },
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-attr">authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${accessToken}</span>`</span>,
    },
    customApiPathParameters,
    <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-attr">data</span>: <span class="hljs-string">&quot;data&quot;</span> }),
  },
  clientConfig,
});</code></pre>
				<p>For more documentation about this helper function, please refer to the <a href="https://salesforcecommercecloud.github.io/commerce-sdk-isomorphic/modules/helpers.html">commerce-sdk-isomorphic docs</a>.</p>
				<a href="#license-information" id="license-information" style="color: inherit; text-decoration: none;">
					<h2>License Information</h2>
				</a>
				<p>The Commerce SDK Isomorphic is licensed under BSD-3-Clause license. See the <a href="./LICENSE.txt">license</a> for details.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/clientconfig.html">client<wbr>Config</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/config.html">config</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/helpers.html">helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/responseerror.html">response<wbr>Error</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperbaskets.html">shopper<wbr>Baskets</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shoppercontexts.html">shopper<wbr>Contexts</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shoppercustomers.html">shopper<wbr>Customers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperdiscoverysearch.html">shopper<wbr>Discovery<wbr>Search</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperexperience.html">shopper<wbr>Experience</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shoppergiftcertificates.html">shopper<wbr>Gift<wbr>Certificates</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperlogin.html">shopper<wbr>Login</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperorders.html">shopper<wbr>Orders</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperproducts.html">shopper<wbr>Products</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperpromotions.html">shopper<wbr>Promotions</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shoppersearch.html">shopper<wbr>Search</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperseo.html">shopper<wbr>Seo</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperstores.html">shopper<wbr>Stores</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/templateurl.html">template<wbr>Url</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/version.html">version</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>