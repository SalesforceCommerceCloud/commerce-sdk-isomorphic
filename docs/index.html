<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>commerce-sdk-isomorphic</title>
	<meta name="description" content="Documentation for commerce-sdk-isomorphic">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">commerce-sdk-isomorphic</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>commerce-sdk-isomorphic</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#commerce-sdk-isomorphic" id="commerce-sdk-isomorphic" style="color: inherit; text-decoration: none;">
					<h1>commerce-sdk-isomorphic</h1>
				</a>
				<p>The Salesforce Commerce SDK (Isomorphic) allows easy interaction with the B2C Commerce platform’s Shopper APIs on the Node.js runtime and works both in browsers and Node applications. For a Node-based SDK that can access the Admin APIs in addition to the Shopper APIs, see the main <a href="https://github.com/SalesforceCommerceCloud/commerce-sdk">Commerce SDK</a>. </p>
				<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
					<h2>Getting Started</h2>
				</a>
				<a href="#requirements" id="requirements" style="color: inherit; text-decoration: none;">
					<h3>Requirements</h3>
				</a>
				<ul>
					<li>Node <code>^12.x</code>, <code>^14.x</code>, <code>^16.x</code>, <code>^18.x</code></li>
				</ul>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h3>Installation</h3>
				</a>
				<pre><code class="language-bash">npm install commerce-sdk-isomorphic</code></pre>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h3>Usage</h3>
				</a>
				<blockquote>
					<p><strong>Note:</strong> These are required parameters.</p>
				</blockquote>
				<table>
					<thead>
						<tr>
							<th>Parameter</th>
							<th align="left">Description</th>
						</tr>
					</thead>
					<tbody><tr>
							<td>clientId</td>
							<td align="left">ID of the client account created with Salesforce Commerce.</td>
						</tr>
						<tr>
							<td>organizationId</td>
							<td align="left">The unique identifier for your Salesforce identity.</td>
						</tr>
						<tr>
							<td>shortCode</td>
							<td align="left">Region-specific merchant ID.</td>
						</tr>
						<tr>
							<td>siteId</td>
							<td align="left">Name of the site to access data from, for example, RefArch or SiteGenesis.</td>
						</tr>
				</tbody></table>
				<a href="#configure-the-isomorphic-sdk" id="configure-the-isomorphic-sdk" style="color: inherit; text-decoration: none;">
					<h3>Configure the Isomorphic SDK</h3>
				</a>
				<pre><code class="language-javascript"><span class="hljs-comment">/**
 * Configure required parameters
 *
 * To learn more about the parameters please refer to https://developer.salesforce.com/docs/commerce/commerce-api/guide/get-started.html
 */</span>
<span class="hljs-keyword">import</span> {helpers, ShopperLogin, ShopperSearch} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;commerce-sdk-isomorphic&#x27;</span>;

<span class="hljs-comment">// Create a configuration to use when creating API clients</span>
<span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">proxy</span>: <span class="hljs-string">&#x27;https://localhost:3000&#x27;</span>, <span class="hljs-comment">// Routes API calls through a proxy when set</span>
  <span class="hljs-attr">headers</span>: {},
  <span class="hljs-attr">parameters</span>: {
    <span class="hljs-attr">clientId</span>: <span class="hljs-string">&#x27;&lt;your-client-id&gt;&#x27;</span>,
    <span class="hljs-attr">organizationId</span>: <span class="hljs-string">&#x27;&lt;your-org-id&gt;&#x27;</span>,
    <span class="hljs-attr">shortCode</span>: <span class="hljs-string">&#x27;&lt;your-short-code&gt;&#x27;</span>,
    <span class="hljs-attr">siteId</span>: <span class="hljs-string">&#x27;&lt;your-site-id&gt;&#x27;</span>,
  },
  <span class="hljs-attr">throwOnBadResponse</span>: <span class="hljs-literal">true</span>,
};

<span class="hljs-keyword">const</span> shopperLogin = <span class="hljs-keyword">new</span> ShopperLogin(config);
<span class="hljs-comment">// Execute Public Client OAuth with PKCE to acquire guest tokens</span>
<span class="hljs-keyword">const</span> {access_token, refresh_token} = <span class="hljs-keyword">await</span> helpers.loginGuestUser(
  shopperLogin,
  {<span class="hljs-attr">redirectURI</span>: <span class="hljs-string">`<span class="hljs-subst">${config.proxy}</span>/callback`</span>} <span class="hljs-comment">// Callback URL must be configured in SLAS Admin</span>
);

<span class="hljs-comment">// Execute Private Client OAuth with PKCE to acquire guest tokens</span>
<span class="hljs-comment">// ***WARNING*** Be cautious about using this function in the browser as you may end up exposing your client secret</span>
<span class="hljs-comment">// only use it when you know your slas client secret is secured</span>
<span class="hljs-comment">// const {access_token, refresh_token} = await helpers.loginGuestUserPrivate(</span>
<span class="hljs-comment">//   shopperLogin,</span>
<span class="hljs-comment">//   {}, {clientSecret: &#x27;&lt;your-slas-client-secret&gt;&#x27;}</span>
<span class="hljs-comment">// );</span>

<span class="hljs-keyword">const</span> shopperSearch = <span class="hljs-keyword">new</span> ShopperSearch({
  ...config,
  <span class="hljs-attr">headers</span>: {<span class="hljs-attr">authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${access_token}</span>`</span>},
});

<span class="hljs-keyword">const</span> searchResult = <span class="hljs-keyword">await</span> shopperSearch.productSearch({
  <span class="hljs-attr">parameters</span>: {<span class="hljs-attr">q</span>: <span class="hljs-string">&#x27;shirt&#x27;</span>},
});</code></pre>
				<a href="#cors" id="cors" style="color: inherit; text-decoration: none;">
					<h4>CORS</h4>
				</a>
				<p>The Salesforce Commerce API (SCAPI) does not support CORS, so a proxy must be used to be able to use the SDK.</p>
				<a href="#advanced-options" id="advanced-options" style="color: inherit; text-decoration: none;">
					<h3>Advanced Options</h3>
				</a>
				<p>Commerce SDK Isomorphic supports Fetch API options for <a href="https://github.com/node-fetch/node-fetch/1#api">node-fetch</a> on server and <a href="https://github.github.io/fetch/">whatwg-fetch</a> on browser with a simple configuration.
				This sample code shows how to configure HTTP timeout and agent options.</p>
				<pre><code class="language-javascript"><span class="hljs-comment">/**
 * Configure advanced timeout and agent parameters
 *
 * To learn more about the parameters please refer to the [Salesforce Developer Center](https://developer.salesforce.com/docs/commerce/commerce-api).
 */</span>
<span class="hljs-comment">// Create a configuration to use when creating API clients</span>
<span class="hljs-keyword">const</span> https = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;https&#x27;</span>);

<span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">proxy</span>: <span class="hljs-string">&#x27;https://localhost:3000&#x27;</span>,
  <span class="hljs-attr">headers</span>: {},
  <span class="hljs-attr">parameters</span>: {
    <span class="hljs-attr">clientId</span>: <span class="hljs-string">&#x27;&lt;your-client-id&gt;&#x27;</span>,
    <span class="hljs-attr">organizationId</span>: <span class="hljs-string">&#x27;&lt;your-org-id&gt;&#x27;</span>,
    <span class="hljs-attr">shortCode</span>: <span class="hljs-string">&#x27;&lt;your-short-code&gt;&#x27;</span>,
    <span class="hljs-attr">siteId</span>: <span class="hljs-string">&#x27;&lt;your-site-id&gt;&#x27;</span>,
  },
  <span class="hljs-attr">fetchOptions</span>: {
    <span class="hljs-attr">timeout</span>: <span class="hljs-number">2000</span>, <span class="hljs-comment">//request times out after 2 seconds</span>
    <span class="hljs-attr">agent</span>: <span class="hljs-keyword">new</span> https.agent({
      <span class="hljs-comment">// a custom http agent</span>
      <span class="hljs-attr">keepAlive</span>: <span class="hljs-literal">true</span>,
    }),
  },
};</code></pre>
				<a href="#additional-config-settings" id="additional-config-settings" style="color: inherit; text-decoration: none;">
					<h3>Additional Config Settings</h3>
				</a>
				<p><em>headers:</em> A collection of key/value string pairs representing additional headers to include with API requests.</p>
				<p><em>throwOnBadResponse:</em> Default value is false. When set to true, the SDK throws an Error on responses with statuses that are not 2xx or 304.</p>
				<a href="#publicprivate-client-shopper-login-slas-helpers" id="publicprivate-client-shopper-login-slas-helpers" style="color: inherit; text-decoration: none;">
					<h3>Public/Private Client Shopper Login (SLAS) helpers</h3>
				</a>
				<p>A collection of helper functions are available in this SDK to simplify <a href="https://developer.salesforce.com/docs/commerce/commerce-api/references?meta=shopper-login:Summary">Public/Private Client Shopper Login OAuth flows</a>. See sample code above for guest login.</p>
				<p><strong>⚠️ WARNING ⚠️</strong>
				Users should be extremely cautious about using the SLAS private client helper functions in the browser as it can expose your client secret. Ensure that your client secret is secured before running the function client side.</p>
				<a href="#custom-query-parameters" id="custom-query-parameters" style="color: inherit; text-decoration: none;">
					<h3>Custom Query Parameters</h3>
				</a>
				<p>With the introduction of <a href="https://developer.salesforce.com/docs/commerce/commerce-api/guide/extensibility_via_hooks.html">hooks for Commerce APIs</a>, customers can pass custom query parameters through the SDK to be used in their custom hook. Custom query parameters must begin with <code>c_</code>:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> searchResult = <span class="hljs-keyword">await</span> shopperSearch.productSearch({
  <span class="hljs-attr">parameters</span>: {
    <span class="hljs-attr">q</span>: <span class="hljs-string">&#x27;shirt&#x27;</span>,
    <span class="hljs-attr">c_paramkey</span>: <span class="hljs-string">&#x27;&lt;param-value&gt;&#x27;</span>
  },
});</code></pre>
				<p>Invalid query parameters that are not a part of the API and do not follow the <code>c_</code> custom query parameter convention will be filtered from the request and a warning will be displayed.</p>
				<a href="#custom-apis" id="custom-apis" style="color: inherit; text-decoration: none;">
					<h3>Custom APIs</h3>
				</a>
				<p>The SDK supports calling <a href="https://developer.salesforce.com/docs/commerce/commerce-api/guide/custom-apis.html">custom APIs</a> with a helper function, <code>callCustomEndpoint</code>.</p>
				<p>Example usage:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">import</span> pkg <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;commerce-sdk-isomorphic&#x27;</span>;
<span class="hljs-keyword">const</span> { helpers } = pkg;

<span class="hljs-keyword">const</span> clientConfigExample = {
  <span class="hljs-attr">parameters</span>: {
    <span class="hljs-attr">clientId</span>: <span class="hljs-string">&quot;&lt;your-client-id&gt;&quot;</span>,
    <span class="hljs-attr">organizationId</span>: <span class="hljs-string">&quot;&lt;your-org-id&gt;&quot;</span>,
    <span class="hljs-attr">shortCode</span>: <span class="hljs-string">&quot;&lt;your-short-code&gt;&quot;</span>,
    <span class="hljs-attr">siteId</span>: <span class="hljs-string">&quot;&lt;your-site-id&gt;&quot;</span>,
  },
  <span class="hljs-comment">// If not provided, it&#x27;ll use the default production URI:</span>
  <span class="hljs-comment">// &#x27;https://{shortCode}.api.commercecloud.salesforce.com/custom/{apiName}/{apiVersion}&#x27;</span>
  <span class="hljs-comment">// path parameters should be wrapped in curly braces like the default production URI</span>
  <span class="hljs-attr">baseUri</span>: <span class="hljs-string">&quot;&lt;your-base-uri&gt;&quot;</span>
};

<span class="hljs-comment">// Required params: apiName, endpointPath, shortCode, organizaitonId</span>
<span class="hljs-comment">// Required path params can be passed into:</span>
<span class="hljs-comment">// options.customApiPathParameters or clientConfig.parameters</span>
<span class="hljs-keyword">const</span> customApiArgs = { 
  <span class="hljs-attr">apiName</span>: <span class="hljs-string">&#x27;loyalty-info&#x27;</span>,
  <span class="hljs-attr">apiVersion</span>: <span class="hljs-string">&#x27;v1&#x27;</span>, <span class="hljs-comment">// defaults to v1 if not provided</span>
  <span class="hljs-attr">endpointPath</span>: <span class="hljs-string">&#x27;customers&#x27;</span>
}

<span class="hljs-keyword">const</span> accessToken = <span class="hljs-string">&#x27;&lt;INSERT ACCESS TOKEN HERE&gt;&#x27;</span>;

<span class="hljs-keyword">let</span> getResponse = <span class="hljs-keyword">await</span> helpers.callCustomEndpoint({
  <span class="hljs-attr">options</span>: {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,
    <span class="hljs-attr">parameters</span>: {
      <span class="hljs-attr">queryParameter</span>: <span class="hljs-string">&#x27;queryParameter1&#x27;</span>,
    },
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-comment">// Content-Type is defaulted to application/json if not provided</span>
      <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,
      <span class="hljs-attr">authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${access_token}</span>`</span>
    },
    <span class="hljs-attr">customApiPathParameters</span>: customApiArgs
  }, 
  <span class="hljs-attr">clientConfig</span>: clientConfigExample,
  <span class="hljs-comment">// Flag to retrieve raw response or data from helper function</span>
  <span class="hljs-attr">rawResponse</span>: <span class="hljs-literal">false</span>, 
})

<span class="hljs-keyword">let</span> postResponse = <span class="hljs-keyword">await</span> helpers.callCustomEndpoint({
  <span class="hljs-attr">options</span>: {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">parameters</span>: {
      <span class="hljs-attr">queryParameter</span>: <span class="hljs-string">&#x27;queryParameter1&#x27;</span>,
    },
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-attr">authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${access_token}</span>`</span>
    },
    <span class="hljs-attr">customApiPathParameters</span>: customApiArgs,
    <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-attr">data</span>: <span class="hljs-string">&#x27;data&#x27;</span> })
  }, 
  <span class="hljs-attr">clientConfig</span>: clientConfigExample,
  <span class="hljs-comment">// Flag to retrieve raw response or data from helper function</span>
  <span class="hljs-attr">rawResponse</span>: <span class="hljs-literal">false</span>, 
})

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;get response: &#x27;</span>, getResponse)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;post response: &#x27;</span>, postResponse)</code></pre>
				<p>For more documentation about this helper function, please refer to the <a href="https://salesforcecommercecloud.github.io/commerce-sdk-isomorphic/modules/helpers.html">commerce-sdk-isomorphic docs</a>.</p>
				<p>For more information about custom APIs, please refer to the <a href="https://developer.salesforce.com/docs/commerce/commerce-api/guide/custom-apis.html">Salesforce Developer Docs</a></p>
				<a href="#license-information" id="license-information" style="color: inherit; text-decoration: none;">
					<h2>License Information</h2>
				</a>
				<p>The Commerce SDK Isomorphic is licensed under BSD-3-Clause license. See the <a href="./LICENSE.txt">license</a> for details.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/clientconfig.html">client<wbr>Config</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/config.html">config</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/helpers.html">helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/responseerror.html">response<wbr>Error</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperbaskets.html">shopper<wbr>Baskets</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shoppercontexts.html">shopper<wbr>Contexts</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shoppercustomers.html">shopper<wbr>Customers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperdiscoverysearch.html">shopper<wbr>Discovery<wbr>Search</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperexperience.html">shopper<wbr>Experience</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shoppergiftcertificates.html">shopper<wbr>Gift<wbr>Certificates</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperlogin.html">shopper<wbr>Login</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperorders.html">shopper<wbr>Orders</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperproducts.html">shopper<wbr>Products</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperpromotions.html">shopper<wbr>Promotions</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shoppersearch.html">shopper<wbr>Search</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperseo.html">shopper<wbr>Seo</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/shopperstores.html">shopper<wbr>Stores</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/templateurl.html">template<wbr>Url</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/version.html">version</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>